<html>
<head>
<title>Pong</title>
<body>
<canvas id="laCanvas" width="1000" height="600" >

</canvas>
</body>
<script>
var c = document.getElementById("laCanvas");
var ctx = c.getContext("2d");
var leftPaddleX = 20;
var leftPaddleY = 225;
var leftPaddleWidth = 20;
var leftPaddleHeight = 150;
var rightPaddleX = 960;
var rightPaddleY = 225;
var rightPaddleWidth = 20;
var rightPaddleHeight = 150;
var ballXcord = 500;
var ballYcord = 300;
var dY = 5;
var dX = 5;

ctx.fillStyle = "#000000";
ctx.fillRect(0,0,1000,600);
ctx.fillStyle = "#FFFFFF";
leftPaddle = ctx.fillRect(leftPaddleX,leftPaddleY,leftPaddleWidth,leftPaddleHeight);
rightPaddle = ctx.fillRect(rightPaddleX,rightPaddleY,rightPaddleWidth,rightPaddleHeight);
ctx.beginPath();
ctx.linewidth="5";
ctx.strokeStyle="black";
ctx.beginPath();
ctx.arc(ballXcord,ballYcord,15,0,2*Math.PI);
ctx.fillStyle = "white";
ctx.fill();
ctx.font= "80px Veranda";
ctx.fillStyle= "white";
ctx.fillText("0 0",450,70);

var keyWPressed = false;
var keySPressed = false;
var keyArrowUpPressed = false;
var keyArrowDownPressed = false;

window.addEventListener('keydown', function (evt) {
	if (evt.keyCode === 87) {
		keyWPressed = true;
		keySPressed = false;  	// the player can hold down both keys at once, but 
								// we want the last pressed key to take precedence
	} else if (evt.keyCode === 83) {
		keySPressed = true;
		keyWPressed = false;   // last keypress takes precedence
	} else if (evt.keyCode === 38) { // up arrow
		keyArrowUpPressed = true;
		keyArrowDownPressed = false;  // last keypress takes precedence
	} else if (evt.keyCode === 40) {  // down arrow
		keyArrowDownPressed = true;
		keyArrowUpPressed = false;  // last keypress takes precedence
	} else if (evt.keyCode === 82) {  // 'r'
	    // when a player has won, hitting 'r' resets the game
		if (winner) {
			restartGame();
		}
	}
});

window.addEventListener('keyup', function (evt){
	if (evt.keyCode === 87) {
		keyWPressed = false;
	} else if (evt.keyCode === 83) {
		keySPressed = false;
	} else if (evt.keyCode === 38) { // up arrow
		keyArrowUpPressed = false;
	} else if (evt.keyCode === 40) {  // down arrow
		keyArrowDownPressed = false;
	}
});

function draw(){
	ctx.fillStyle = "#000000";
	ctx.fillRect(0,0,1000,600);
	ctx.fillStyle = "#FFFFFF";
	leftPaddle = ctx.fillRect(leftPaddleX,leftPaddleY,leftPaddleWidth,leftPaddleHeight);
	rightPaddle = ctx.fillRect(rightPaddleX,rightPaddleY,rightPaddleWidth,rightPaddleHeight);
	ctx.beginPath();
	ctx.linewidth="5";
	ctx.strokeStyle="black";
	ctx.beginPath();
	ctx.arc(ballXcord,ballYcord,15,0,2*Math.PI);
	ctx.fillStyle = "magenta";
	ctx.fill();
	ctx.font= "80px Veranda";
	ctx.fillStyle= "white";
	ctx.fillText("0 0",450,70);

}

function update(){
	if (keyWPressed && leftPaddleY > 0){
		leftPaddleY = leftPaddleY - 5;
	} else if (keySPressed && leftPaddleY < 450){
		leftPaddleY = leftPaddleY + 5;
	}
	if (keyArrowUpPressed && rightPaddleY > 0){
		rightPaddleY = rightPaddleY - 5;
	} else if (keyArrowDownPressed && rightPaddleY < 450){
		rightPaddleY = rightPaddleY + 5;
	}

	if (ballYcord < 0 || ballYcord > 600){
		dY = -dY;
	}
	if (ballXcord < 0 || ballXcord > 1000){
		dX = -dX;
	}

	ballYcord += dY;
	ballXcord += dX;

}

function gameloop(){
	update();
	// isColliding(ballXcord,ballYcord,leftPaddleX,leftPaddleY,leftPaddleWidth,leftPaddleHeight);
	draw();
	window.requestAnimationFrame(gameloop);
}

window.addEventListener('keyup', gameloop());

/*5/12 stating collide detection*/

Number.prototype.between = function (min, max) {
    return this > min && this < max;
};


// if ((ballXcord).between(leftPaddleX, leftPaddleX + leftPaddleWidth) && (ballYcord.between(leftPaddleY, leftPaddleY + leftPaddleHeight))) {
//     alert('collided!');
// }
function isColliding(x1,y1,x2,y2,width2,height2){
	if ((x1).between(x2, x2 + width2) && (y1.between(y2, y2 + height2))) {
    	console.log('collided!');
	}else {
		console.log('didn\'t touch');
	}
}

	// Returns true if the two rectangles overlap, false otherwise.
	// The rectangles are specified by their top-left (x, y) coord and their widths and heights.

//  function reset(){
// 	keyWPressed = false;
// 	keySPressed = false;
// 	keyArrowUpPressed = false;
// 	keyArrowDownPressed = false;
// }

/*kinks:
1.Stop the ball from moving right.
*/


</script>
</head>
</html> 